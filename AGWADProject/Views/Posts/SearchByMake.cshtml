@model List<AGWADProject.Models.Post>

<div class="text-center mb-4">
    <h2>Caută după marca mașinii:</h2>

    <form method="get" asp-action="SearchByMake" class="form-inline justify-content-center">
        <input type="text" name="make" placeholder="Tasteaza marca..." class="form-control mr-2" style="min-width: 250px;" />
        <button type="submit" class="btn btn-primary" style="margin-top: 10px;">Search</button>
    </form>
</div>

@if (!Model.Any())
{
    <p class="text-center">Nu s-au găsit rezultate.</p>
}
else
{
    <table class="table table-striped table-bordered align-middle">
        <thead class="thead-dark">
            <tr>
                <th>Foto</th>
                <th>Titlu</th>
                <th>Descriere</th>
                <th>Preț</th>
                <th>Postat la</th>
                <th>Persoană</th>
                <th>Mașină</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var post in Model)
            {
                <tr>
                    <td style="width: 100px; height: 100px; padding: 0;">
                        @if (!string.IsNullOrEmpty(post.CoverPhotoPath))
                        {
                            <img src="@post.CoverPhotoPath" alt="Cover Photo"
                                 style="width: 100%; height: 100%; object-fit: cover; display: block;" />
                        }
                        else
                        {
                            <span class="text-muted d-flex justify-content-center align-items-center"
                                  style="width: 100px; height: 100px;">No photo</span>
                        }
                    </td>
                    <td>@post.Title</td>
                    <td>@post.Description</td>
                    <td>@post.Price.ToString("C")</td>
                    <td>@post.PostedOn.ToShortDateString()</td>
                    <td>@post.Person?.FirstName @post.Person?.LastName</td>
                    <td>@post.Car?.Make @post.Car?.Model (@post.Car?.Year)</td>
                    <td>
                        <a asp-action="Details" asp-route-id="@post.Id" class="btn btn-primary">Details</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
